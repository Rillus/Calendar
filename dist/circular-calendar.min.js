(()=>{var Pt=Object.defineProperty;var Ft=(n,t,e)=>t in n?Pt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ut=(n,t,e)=>Ft(n,typeof t!="symbol"?t+"":t,e);var dt=[[72,88,154],[39,93,164],[61,138,174],[101,154,139],[155,177,70],[182,199,65],[218,205,72],[236,211,68],[251,184,65],[248,132,40],[229,94,52],[153,32,122]],ht=[[117,132,196],[91,154,238],[109,183,217],[123,182,165],[170,193,80],[182,199,65],[218,205,72],[236,211,68],[251,184,65],[252,153,75],[255,158,128],[226,115,198]],tt=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];var k=360/12,pt=1,mt=.96,ft=.92,gt=.96,P=400,W=50,et=20,nt=10;function st(n){let t=n.toString(16);return t.length==1?"0"+t:t}function ot(n){let t=n[0],e=n[1],o=n[2];return"#"+st(t)+st(e)+st(o)}function E(n){return n*Math.PI/180}function O(n,t){let e=0,o=Math.min(t,n.length);for(let u=0;u<o;u++)e+=n[u];return e}function F(n,t,e,o){return[n+e*Math.cos(o),t+e*Math.sin(o)]}function bt(n,t,e,o,u,d=1,b=0){let y=e*d,D=F(n,t,y,u),T=F(n,t,y,o),j=b>0?F(n,t,b,u):[n,t],Y=b>0?F(n,t,b,o):[n,t],H=u-o<=180?"0":"1";return b>0?["M",D[0],D[1],"A",y,y,0,H,0,T[0],T[1],"L",Y[0],Y[1],"A",b,b,0,H,1,j[0],j[1],"Z"].join(" "):["M",n,t,"L",D[0],D[1],"A",y,y,0,H,0,T[0],T[1],"Z"].join(" ")}var xt=n=>{let t=Number(n);return Number.isFinite(t)?(t%1+1)%1:0};function Rt(n){let e=xt(n)*2*Math.PI;return(1-Math.cos(e))/2}function rt(n,t){let e=Number(n);if(!Number.isFinite(e)||e<=0)return 0;let o=xt(t),u=Rt(o),d=2*e*u;return(o<.5?-1:1)*d}function Tt(n){return n%400===0?!0:n%100===0?!1:n%4===0}function Z(n,t){let e=[31,28,31,30,31,30,31,31,30,31,30,31];return n===1&&Tt(t)?29:e[n]}var V=29.53058867,$t=1.5,Yt=2.1;function q(n){let t=new Date(Date.UTC(2024,0,11,11,57)),o=(n.getTime()-t.getTime())/(1e3*60*60*24)%V;return o<0&&(o+=V),o/V}function it(n){return q(n)*2*Math.PI}function wt(n){let t=q(n),e=$t/V,o=Yt/V;return Math.min(t,1-t)<=e?"New Moon":Math.abs(t-.5)<=o?"Full Moon":t<.22?"Waxing Crescent":t<.28?"First Quarter":t<.47?"Waxing Gibbous":t<.72?"Waning Gibbous":t<.78?"Last Quarter":"Waning Crescent"}var yt=n=>new Date(n.getTime());function vt(n){if(!n)throw new Error("SVG element is required");let t=[],e=[],o=[],u=new Set,d=n,b=P/2,y=P/2,D=P/2-W-nt,T=new Date().getFullYear(),j=0,Y=i=>{let s=yt(i);for(let a of u)try{a(s)}catch(w){console.error("Date change listener failed",w)}},H=i=>(u.add(i),()=>u.delete(i)),at=i=>{d=i,b=P/2,y=P/2,D=P/2-W-nt},Ct=()=>{let i=d.querySelector(".segments-group");i&&i.remove();let s=document.createElementNS("http://www.w3.org/2000/svg","g");s.setAttribute("class","segments-group"),t.length=0,e.length=0,o.length=0;for(let a=0;a<12;a++){let w=dt[a],x=ht[a],v=ot(w),M=ot(x);t.push(k),o.push(v),e.push(tt[a]);let r=Z(a,T),h;r===31?h=pt:r===28?h=ft:r===29?h=gt:h=mt;let f=-E(O(t,a))+E(45),g=E(t[a]),A=f+g,c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d",bt(b,y,D,f,A,h)),c.setAttribute("fill",v),c.setAttribute("stroke","#fff"),c.setAttribute("stroke-width","1"),c.setAttribute("data-segment-index",a),c.setAttribute("class","calendar-segment"),c.setAttribute("data-base-color",v),c.setAttribute("data-hover-color",M),c.style.cursor="pointer",c.addEventListener("mouseenter",N=>{N.target.setAttribute("fill",M)}),c.addEventListener("mouseleave",N=>{N.target.setAttribute("fill",v)}),s.appendChild(c);let m=-E(O(t,a))+E(45)+g/2,I=D*h*.95,l=F(b,y,I,m),S=m*180/Math.PI+90;m>Math.PI/2&&m<3*Math.PI/2&&(S+=180);let p=document.createElementNS("http://www.w3.org/2000/svg","text");p.setAttribute("x",l[0]),p.setAttribute("y",l[1]),p.setAttribute("text-anchor","middle"),p.setAttribute("dominant-baseline","middle"),p.setAttribute("transform",`rotate(${S} ${l[0]} ${l[1]})`),p.setAttribute("class","segment-label"),p.setAttribute("data-segment-index",a),p.textContent=e[a],p.style.fontSize=`${P/35}px`,p.style.fontFamily="Helvetica, Arial, sans-serif",p.style.fontWeight="bold",p.style.pointerEvents="none",a>=3&&a<=9?p.style.fill="#000":(p.style.fill="#fff",p.style.filter="drop-shadow(0px 0px 5px rgba(255, 255, 255, 0.2))"),s.appendChild(p)}d.appendChild(s)},ct=()=>{let i=d.querySelector(".center-circle");i&&i.remove();let s=d.querySelector(".center-text");s&&s.remove();let a=document.createElementNS("http://www.w3.org/2000/svg","circle"),w=D/3;a.setAttribute("cx",b),a.setAttribute("cy",y),a.setAttribute("r",w),a.setAttribute("fill","#ffffff"),a.setAttribute("class","center-circle"),d.appendChild(a)},z=(i,s=null)=>{ct(),d.querySelectorAll(".center-text").forEach(A=>A.remove());let w=16,x=10,v=6,M=y,r=M-w/2-v,h=M+w/2+v;if(s){let c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][s.getDay()],m=document.createElementNS("http://www.w3.org/2000/svg","text");m.setAttribute("x",b),m.setAttribute("y",r),m.setAttribute("text-anchor","middle"),m.setAttribute("dominant-baseline","middle"),m.setAttribute("class","center-text"),m.textContent=c,m.style.fontSize=`${x}px`,m.style.fontFamily="Helvetica, Arial, sans-serif",m.style.fill="#333",d.appendChild(m)}let f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttribute("x",b),f.setAttribute("y",M),f.setAttribute("text-anchor","middle"),f.setAttribute("dominant-baseline","middle"),f.setAttribute("class","center-text");let g=i;if(s){let A=s.getDate();g=`${i} ${A}`}if(f.textContent=g,f.style.fontSize=`${w}px`,f.style.fontFamily="Helvetica, Arial, sans-serif",f.style.fill="#333",d.appendChild(f),s){let A=s.getFullYear(),c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("x",b),c.setAttribute("y",h),c.setAttribute("text-anchor","middle"),c.setAttribute("dominant-baseline","middle"),c.setAttribute("class","center-text"),c.textContent=A.toString(),c.style.fontSize=`${x}px`,c.style.fontFamily="Helvetica, Arial, sans-serif",c.style.fill="#333",d.appendChild(c);let m=wt(s),I=h+x+v,l=document.createElementNS("http://www.w3.org/2000/svg","text");l.setAttribute("x",b),l.setAttribute("y",I),l.setAttribute("text-anchor","middle"),l.setAttribute("dominant-baseline","middle"),l.setAttribute("class","center-text"),l.textContent=m,l.style.fontSize=`${x}px`,l.style.fontFamily="Helvetica, Arial, sans-serif",l.style.fill="#666",d.appendChild(l)}},_t=()=>{let i=d.querySelector(".sun-icon"),s=d.querySelector(".moon-icon");i&&i.remove(),s&&s.remove()},Dt=i=>{let s=!1,a=r=>r.touches&&r.touches.length>0?{x:r.touches[0].clientX,y:r.touches[0].clientY}:{x:r.clientX,y:r.clientY},w=r=>{let h=d.getBoundingClientRect(),f=a(r),g=f.x-h.left,A=f.y-h.top,c=d.viewBox.baseVal,m=h.width,I=h.height,l=g/m*c.width,S=A/I*c.height,p=l-b,N=S-y,C=Math.atan2(N,p);return C<0&&(C+=2*Math.PI),C},x=r=>{var lt;let h=[];for(let R=0;R<12;R++){let _=-E(O(t,R))+E(45);for(;_<0;)_+=2*Math.PI;for(;_>=2*Math.PI;)_-=2*Math.PI;h.push({month:R,angle:_})}let f=0,g=0;for(let R=0;R<h.length;R++){let $=h[R].angle,_=$+E(k);_>2*Math.PI&&(_-=2*Math.PI);let X=!1;if($<_?X=r>=$&&r<_:X=r>=$||r<_,X){f=h[R].month,g=r-$,g<0&&(g+=2*Math.PI);break}}let A=E(k);g=Math.max(0,Math.min(g,A));let c=1-g/A,m=Z(f,T),I=Math.max(1,Math.min(m,Math.floor(c*m)+1)),l=new Date(T,f,I);z(e[f],l),Y(l);let S=D+W,p=F(b,y,S,r),N=it(l),C=q(l),Q=r-N,K=D+et,G=F(b,y,K,Q);i.setAttribute("transform",`translate(${p[0]}, ${p[1]})`);let L=d.querySelector(".moon-icon");if(L){L.setAttribute("transform",`translate(${G[0]}, ${G[1]})`);let $=rt(6,C),_=(lt=L.querySelector)==null?void 0:lt.call(L,".moon-icon__shadow");_&&_.setAttribute("cx",String($))}};i.addEventListener("mousedown",r=>{s=!0,i.style.cursor="grabbing",r.preventDefault(),r.stopPropagation()});let v=r=>{if(s){let h=w(r);x(h),r.preventDefault()}},M=()=>{s&&(s=!1,i.style.cursor="grab")};document.addEventListener("mousemove",v),document.addEventListener("mouseup",M),i.addEventListener("touchstart",r=>{s=!0,r.preventDefault()},{passive:!1}),document.addEventListener("touchmove",r=>{if(s){let h=w(r);x(h),r.preventDefault()}},{passive:!1}),document.addEventListener("touchend",()=>{s&&(s=!1)},{passive:!0})},Et=(i,s,a=!1,w=null)=>{_t();let x=document.createElementNS("http://www.w3.org/2000/svg","g");x.setAttribute("class","sun-icon"),x.setAttribute("transform",`translate(${i[0]}, ${i[1]})`),a&&(x.style.cursor="grab",x.setAttribute("data-draggable","true"),x.style.pointerEvents="all");for(let p=0;p<8;p++){let N=p*Math.PI/4,C=document.createElementNS("http://www.w3.org/2000/svg","line"),Q=Math.cos(N)*8,K=Math.sin(N)*8,G=Math.cos(N)*12,L=Math.sin(N)*12;C.setAttribute("x1",Q),C.setAttribute("y1",K),C.setAttribute("x2",G),C.setAttribute("y2",L),C.setAttribute("stroke","#ffd700"),C.setAttribute("stroke-width","2"),C.setAttribute("stroke-linecap","round"),x.appendChild(C)}let v=document.createElementNS("http://www.w3.org/2000/svg","circle");v.setAttribute("r","8"),v.setAttribute("fill","#ffd700"),v.setAttribute("stroke","#ffaa00"),v.setAttribute("stroke-width","1"),x.appendChild(v);let M=document.createElementNS("http://www.w3.org/2000/svg","g");M.setAttribute("class","moon-icon"),M.setAttribute("transform",`translate(${s[0]}, ${s[1]})`);let r=6,h=`moon-clip-${j++}`,f=document.createElementNS("http://www.w3.org/2000/svg","defs"),g=document.createElementNS("http://www.w3.org/2000/svg","clipPath");g.setAttribute("id",h);let A=document.createElementNS("http://www.w3.org/2000/svg","circle");A.setAttribute("cx","0"),A.setAttribute("cy","0"),A.setAttribute("r",String(r)),g.appendChild(A),f.appendChild(g),M.appendChild(f);let c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("cx","0"),c.setAttribute("cy","0"),c.setAttribute("r",String(r)),c.setAttribute("fill","#f5f5f5"),c.setAttribute("class","moon-icon__disc"),M.appendChild(c);let m=Number.isFinite(Number(w))?Number(w):0,I=rt(r,m),l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("cx",String(I)),l.setAttribute("cy","0"),l.setAttribute("r",String(r)),l.setAttribute("fill","#111"),l.setAttribute("clip-path",`url(#${h})`),l.setAttribute("class","moon-icon__shadow"),M.appendChild(l);let S=document.createElementNS("http://www.w3.org/2000/svg","circle");S.setAttribute("cx","0"),S.setAttribute("cy","0"),S.setAttribute("r",String(r)),S.setAttribute("fill","none"),S.setAttribute("stroke","#999"),S.setAttribute("stroke-width","1"),S.setAttribute("class","moon-icon__outline"),M.appendChild(S),d.appendChild(x),d.appendChild(M),a&&Dt(x)},B=i=>{let s=i.getMonth(),a=i.getDate(),w=i.getFullYear(),x=-E(O(t,s))+E(45),v=E(k),M=Z(s,w),h=(1-(a-1)/M)*v,g=x+h;for(;g<0;)g+=2*Math.PI;for(;g>=2*Math.PI;)g-=2*Math.PI;let A=D+W,c=F(b,y,A,g),m=q(i),I=it(i),l=g-I,S=D+et,p=F(b,y,S,l);Et(c,p,!0,m)},Nt=i=>{var w;let s=yt(i),a=s.getMonth();B(s),z((w=e[a])!=null?w:tt[a],s),Y(s)},It=i=>{T=i;let s=new Date;if(i===s.getFullYear())B(s),z(e[s.getMonth()],s),Y(s);else{let a=new Date(i,5,15);B(a),z(e[a.getMonth()],a),Y(a)}};return at(n),{initRenderer:at,drawCalendar:Ct,drawCircle:ct,writeSegmentName:z,setYear:It,showSunAndMoonForDate:B,selectDate:Nt,subscribeToDateChanges:H}}var U=n=>{let t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(String(n));if(!t)return null;let e=Number(t[1]),o=Number(t[2]),u=Number(t[3]);return!Number.isFinite(e)||!Number.isFinite(o)||!Number.isFinite(u)?null:new Date(e,o-1,u)},Mt=n=>{let t=n.getFullYear(),e=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0");return`${t}-${e}-${o}`},J=class extends HTMLElement{constructor(){super(),this._selectedDate=null,this._renderer=null,this._isConnected=!1,this._isApplyingExternalValue=!1,this._suppressRendererNotification=!1;let t=this.attachShadow({mode:"open"}),e=document.createElement("style");e.textContent=`
      :host { display: block; }
      .wrap { display: grid; gap: 10px; }
      svg { width: 100%; height: auto; display: block; aspect-ratio: 1; }
      .controls { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
      label { font: 500 0.95rem system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif; color: #333; }
      input[type="date"] { padding: 6px 10px; border: 1px solid #ccc; border-radius: 6px; font: inherit; }
    `.trim();let o=document.createElement("div");o.className="wrap";let u=document.createElement("div");u.className="controls";let d=document.createElement("label");d.textContent="Selected date:",this._dateInput=document.createElement("input"),this._dateInput.type="date",u.appendChild(d),u.appendChild(this._dateInput),this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("part","svg"),this._svg.setAttribute("viewBox",`0 0 ${P} ${P}`),this._svg.setAttribute("preserveAspectRatio","xMidYMid meet"),o.appendChild(u),o.appendChild(this._svg),t.appendChild(e),t.appendChild(o),this._proxyInput=document.createElement("input"),this._proxyInput.type="hidden",this._proxyInput.setAttribute("data-circular-calendar-proxy","true")}connectedCallback(){var e;if(this._isConnected)return;this._isConnected=!0,this._proxyInput.isConnected||this.appendChild(this._proxyInput),this._renderer=vt(this._svg),this._renderer.drawCalendar(),this._renderer.drawCircle();let t=(e=U(this.getAttribute("value")))!=null?e:new Date;this._applyDate(t,{emit:!1,updateRenderer:!0}),this._unsubscribe=this._renderer.subscribeToDateChanges(o=>{this._suppressRendererNotification||this._applyDate(o,{emit:!0,updateRenderer:!1})}),this._dateInput.addEventListener("input",()=>{let o=U(this._dateInput.value);o&&this._applyDate(o,{emit:!1,updateRenderer:!0})}),this._dateInput.addEventListener("change",()=>{let o=U(this._dateInput.value);o&&this._applyDate(o,{emit:!1,updateRenderer:!0})})}disconnectedCallback(){var t;(t=this._unsubscribe)==null||t.call(this),this._unsubscribe=null,this._isConnected=!1}attributeChangedCallback(t,e,o){if(e!==o){if(t==="name"){this._syncProxyName();return}if(t==="value"){if(this._isApplyingExternalValue)return;let u=U(o);if(!u)return;this._applyDate(u,{emit:!1,updateRenderer:!0})}}}get value(){return this._selectedDate?Mt(this._selectedDate):""}set value(t){let e=U(t);e&&this._applyDate(e,{emit:!1,updateRenderer:!0})}get name(){var t;return(t=this.getAttribute("name"))!=null?t:""}set name(t){if(t==null){this.removeAttribute("name");return}this.setAttribute("name",String(t))}_syncProxyName(){var e;let t=(e=this.getAttribute("name"))!=null?e:"";this._proxyInput.name=t}_syncProxyValue(){this._proxyInput.value=this.value}_applyDate(t,{emit:e,updateRenderer:o}){let u=new Date(t.getFullYear(),t.getMonth(),t.getDate()),d=Mt(u);if(this.value===d){e==="input"?this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})):e==="change"?this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})):e&&(this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})));return}this._isApplyingExternalValue=!0;try{this.setAttribute("value",d)}finally{this._isApplyingExternalValue=!1}if(this._selectedDate=u,this._dateInput.value=d,this._syncProxyName(),this._syncProxyValue(),o&&this._renderer){this._suppressRendererNotification=!0;try{this._renderer.setYear(u.getFullYear()),this._renderer.drawCalendar(),this._renderer.drawCircle(),this._renderer.selectDate(u)}finally{this._suppressRendererNotification=!1}}e==="input"?this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})):e==="change"?this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})):e&&(this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})))}};ut(J,"observedAttributes",["value","name"]);function St(){customElements.get("circular-calendar")||customElements.define("circular-calendar",J)}St();})();
